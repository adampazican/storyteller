(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{23:function(e,t,n){e.exports=n(36)},28:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(18),c=n(19),o=n(1),u=n(2),s=n(3),i=(n(28),r.a.createContext([{},function(){}]));function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var E=r.a.createElement("path",{d:"M 0 9 L 0 11 L 50 11 L 50 9 Z M 0 24 L 0 26 L 50 26 L 50 24 Z M 0 39 L 0 41 L 50 41 L 50 39 Z"}),b=function(e){var t=e.svgRef,n=e.title,a=p(e,["svgRef","title"]);return r.a.createElement("svg",m({fill:"#000000",viewBox:"0 0 50 50",width:"35px",height:"35px",ref:t},a),n?r.a.createElement("title",null,n):null,E)},f=r.a.forwardRef((function(e,t){return r.a.createElement(b,m({svgRef:t},e))})),d=(n.p,function(){var e=Object(a.useContext)(i),t=Object(o.a)(e,1)[0],n=Object(a.useState)(!1),l=Object(o.a)(n,2),c=l[0],s=l[1];return r.a.createElement("div",{id:"header"},r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement(u.b,{to:"/"},"Story-teller")),r.a.createElement(h,{user:t,toggleMenu:function(){s(!c)}})),r.a.createElement(g,{user:t,isMenuOpen:c}))});function h(e){return r.a.createElement("div",{id:"menu"},0===Object.keys(e.user).length?r.a.createElement("div",{className:"menu-items"},r.a.createElement(u.b,{to:"/register"},"Register"),r.a.createElement(u.b,{to:"/login"},"Login")):r.a.createElement("div",{className:"menu-items"},r.a.createElement(u.b,{to:"/create-article"},"Novy pribeh"),r.a.createElement(u.b,{to:"/my-stories"},"Moje pribehy"),r.a.createElement(u.b,{to:"/logout"},"Odhl\xe1si\u0165")),r.a.createElement("div",{className:"menu-button",onClick:function(){return e.toggleMenu()}},r.a.createElement(f,null)))}function g(e){return r.a.createElement("div",{id:"mobile-menu",style:e.isMenuOpen&&{display:"block"}||{}},r.a.createElement("ul",null,0===Object.keys(e.user).length?r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/register"},"Register")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/login"},"Login"))):r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/create-article"},"Novy pribeh")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/my-stories"},"Moje pribehy")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/logout"},"Odhl\xe1si\u0165")))))}var v,O=n(7),y=n.n(O),j=n(10),k=n(22);!function(e){e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.PUT="PUT"}(v||(v={}));var x=function(e,t,n){var r=Object(a.useState)(t),l=Object(o.a)(r,2),c=l[0],u=l[1],i=Object(a.useState)(!1),m=Object(o.a)(i,2),p=m[0],E=m[1],b=Object(s.g)();return Object(a.useEffect)((function(){return Object(j.a)(y.a.mark((function t(){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.includes("undefined")||p){t.next=13;break}return t.next=3,fetch("/api/v1".concat(e),n);case 3:if(!(a=t.sent).ok){t.next=11;break}return t.next=7,a.json();case 7:r=t.sent,u(r),t.next=12;break;case 11:a.ok||b.push("/");case 12:E(!0);case 13:case"end":return t.stop()}}),t)})))(),function(){}}),[n,e,t,c,b]),[c,u]};function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var C=r.a.createElement("path",{d:"M10 50A40 40 0 0 0 90 50A40 42 0 0 1 10 50",fill:"#2196f3",stroke:"none"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",repeatCount:"indefinite",keyTimes:"0;1",values:"0 50 51;360 50 51"})),L=function(e){var t=e.svgRef,n=e.title,a=N(e,["svgRef","title"]);return r.a.createElement("svg",S({style:{margin:"auto",background:"rgb(255, 255, 255) none repeat scroll 0% 0%",display:"block",shapeRendering:"auto"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t},a),n?r.a.createElement("title",null,n):null,C)},w=r.a.forwardRef((function(e,t){return r.a.createElement(L,S({svgRef:t},e))})),P=(n.p,n(15));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e,t){var n=t.onSuccessCallback,r=t.token,l=t.method,c=t.defaultState,u=Object(a.useState)({}),s=Object(o.a)(u,2),i=s[0],m=s[1],p=Object(a.useState)(""),E=Object(o.a)(p,2),b=E[0],f=E[1];return{handleSubmit:function(){var t=Object(j.a)(y.a.mark((function t(a){var o,u,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),o={"Content-Type":"Application/json"},r&&(o["x-access-token"]=r),c&&(c=M({},c,{},i)),t.next=6,fetch("/api/v1".concat(e),{method:l||v.POST,headers:o,body:JSON.stringify(c||i)});case 6:if(u=t.sent,console.log(u),!u.ok){t.next=15;break}return t.next=11,u.json();case 11:s=t.sent,n&&n(s),t.next=16;break;case 15:f("");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),handleChange:function(e){f("");var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;m((function(e){return M({},e,Object(P.a)({},a,n))}))},errorMessage:b}};function A(e){var t=Object(s.h)().id,n=Object(a.useContext)(i),l=Object(o.a)(n,1)[0],c={method:v.POST,headers:{}};0!==Object.keys(l).length&&(c.headers["x-access-token"]=l.token);var u=x("/article/".concat(t),null,c),m=Object(o.a)(u,1)[0];return r.a.createElement("div",{className:"ArticleDetail"},null==m?r.a.createElement(w,null):r.a.createElement(G,m),r.a.createElement(D,{articleId:t,token:l.token}))}function D(e){var t=e.articleId,n=e.token,l=x("/article/".concat(t,"/comment"),[],{method:v.GET,headers:{"x-access-token":n}}),c=Object(o.a)(l,2),u=c[0],s=c[1],m=Object(a.useContext)(i),p=Object(o.a)(m,1)[0],E=R("/comment",{token:p.token,defaultState:{articleId:t},onSuccessCallback:function(e){console.log(e),s([e].concat(Object(k.a)(u)))}}),b=E.handleSubmit,f=E.handleChange,d=E.errorMessage;return r.a.createElement("div",null,r.a.createElement("ul",{className:"list list-non-clickable"},p&&r.a.createElement("div",{className:""},r.a.createElement("form",{className:"f-comment",onSubmit:b},""!==d&&r.a.createElement("p",{className:"error"},d),r.a.createElement("textarea",{className:"form-element ta-comment",name:"body",placeholder:"Write your thoughts about this story",onChange:f,minLength:20,maxLength:200}),r.a.createElement("input",{className:"btn",type:"submit",value:"Send"}))),0===Object.keys(u).length?"No comments":u.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("h3",null,e.username),r.a.createElement("p",null,e.date),r.a.createElement("p",null,e.body))}))))}function I(){var e=x("/",[]),t=Object(o.a)(e,1)[0];return r.a.createElement("div",null,r.a.createElement("h2",null,"Latest Articles"),r.a.createElement("ul",{className:"list"},0!==t.length?t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(u.b,{to:"/article/".concat(e.id)},r.a.createElement(U,e)))})):r.a.createElement(w,null)))}function J(){var e=x("/top-articles",[]),t=Object(o.a)(e,1)[0];return r.a.createElement("div",null,r.a.createElement("h2",null,"Top Articles"),r.a.createElement("ol",{className:"list"},0!==t.length?t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(u.b,{to:"/article/".concat(e.id)},r.a.createElement(U,e)))})):r.a.createElement(w,null)))}function F(){var e=Object(s.g)(),t=Object(a.useContext)(i),n=Object(o.a)(t,1)[0],l=x("/user/".concat(n.id,"/article"),[],{method:v.GET,headers:{"x-access-token":n.token}}),c=Object(o.a)(l,2),m=c[0],p=c[1],E=function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/article/".concat(t,"/post"),{method:v.POST,headers:{"Content-Type":"application/json","x-access-token":n.token}});case 2:e.sent.ok&&p(m.map((function(e){return e.id===t&&(e.active=!0),e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/article/".concat(t),{method:v.DELETE,headers:{"x-access-token":n.token}});case 2:e.sent.ok&&p(m.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("ul",{className:"list"},0!==m.length?m.map((function(t,a){return r.a.createElement("li",{key:a},r.a.createElement(u.b,{to:"/article/".concat(t.id)},r.a.createElement(U,Object.assign({},t,{user:n}))),r.a.createElement("div",{className:"action-buttons"},!t.active&&r.a.createElement("button",{className:"btn",onClick:function(){return E(t.id)}},"Post"),r.a.createElement("button",{className:"btn",onClick:function(){return e.push("/article/".concat(t.id,"/update"))}},"Update"),r.a.createElement("button",{className:"btn",onClick:function(){return b(t.id)}},"Delete")))})):r.a.createElement(w,null))}var G=function(e){e.id;var t=e.title,n=e.body,a=e.date,l=e.user;e.active;return r.a.createElement("div",{className:"article-detail"},r.a.createElement("h3",null,t,">"),r.a.createElement("p",null,l.username),r.a.createElement("p",null,a),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:n.replace(/<<([^>>]*)>>/g,"<h4>$1</h4>")}}))},U=function(e){e.id;var t=e.title,n=e.body,a=e.date,l=e.user,c=e.active;return r.a.createElement("div",{style:!c&&{color:"#9E9E9E"}||{}},r.a.createElement("h3",null,t),r.a.createElement("p",null,n),r.a.createElement("p",null,l.username),r.a.createElement("p",null,a))},B=function(){return r.a.createElement("div",{id:"landing-area"},r.a.createElement("h2",null,"Perfect place for your stories!"))},W=function(){return r.a.createElement("footer",null,"Copyright \xa9 2019 Storyteller. All rights reserved;")},Z=function(){return r.a.createElement("div",{id:"latest-blogs"},r.a.createElement("div",{id:"blog-posts"},r.a.createElement(I,null),r.a.createElement(W,null)),r.a.createElement("div",{id:"popular-posts"},r.a.createElement(J,null)))},V=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(B,null),r.a.createElement(Z,null))},_=function(){var e=Object(s.g)(),t=R("/register",{onSuccessCallback:function(){e.push("/")}}),n=t.handleSubmit,a=t.handleChange,l=t.errorMessage;return r.a.createElement("div",{className:"form-container"},r.a.createElement(d,null),r.a.createElement("form",{onSubmit:n},""!==l&&r.a.createElement("p",{className:"error"},l),r.a.createElement("p",null,"Register"),r.a.createElement("input",{className:"form-element",type:"text",name:"username",placeholder:"username",onChange:a,autoFocus:!0,minLength:3,maxLength:20}),r.a.createElement("input",{className:"form-element",type:"password",name:"password",placeholder:"password",onChange:a,minLength:5,maxLength:28}),r.a.createElement("input",{className:"btn",type:"submit",value:"Submit"})),r.a.createElement(W,null))},H=function(){var e=Object(s.g)(),t=Object(a.useContext)(i),n=Object(o.a)(t,2),l=(n[0],n[1]),c=R("/login",{onSuccessCallback:function(t){l(t),localStorage.setItem("user",JSON.stringify(t)),e.push("/")}}),u=c.handleSubmit,m=c.handleChange,p=c.errorMessage;return r.a.createElement("div",{className:"form-container"},r.a.createElement(d,null),r.a.createElement("form",{onSubmit:u},""!==p&&r.a.createElement("p",{className:"error"},p),r.a.createElement("p",null,"Login"),r.a.createElement("input",{className:"form-element",type:"text",name:"username",placeholder:"username",onChange:m,autoFocus:!0,minLength:3,maxLength:20}),r.a.createElement("input",{className:"form-element",type:"password",name:"password",placeholder:"password",onChange:m,minLength:5,maxLength:28}),r.a.createElement("input",{className:"btn",type:"submit",value:"Submit"})),r.a.createElement(W,null))},Y=function(){var e=Object(a.useContext)(i),t=Object(o.a)(e,1)[0],n=Object(s.g)(),l=R("/article",{token:t.token,onSuccessCallback:function(){n.push("/")}}),c=l.handleSubmit,u=l.handleChange,m=l.errorMessage;return r.a.createElement("div",{className:"form-container"},r.a.createElement(d,null),r.a.createElement("form",{onSubmit:c},""!==m&&r.a.createElement("p",{className:"error"},m),r.a.createElement("input",{className:"form-element",type:"text",name:"title",placeholder:"Title",onChange:u,autoFocus:!0,minLength:8,maxLength:20}),r.a.createElement("textarea",{className:"form-element",name:"body",placeholder:"Write about your story",onChange:u,minLength:8,maxLength:2e4}),r.a.createElement("input",{className:"btn",type:"submit",value:"Submit"})),r.a.createElement(W,null))},$=function(){return r.a.createElement("div",{className:"MyStories App"},r.a.createElement(d,null),r.a.createElement(B,null),r.a.createElement("div",null,r.a.createElement(F,null)),r.a.createElement(W,null))},q=function(){return r.a.createElement("div",{className:"ArticleDetailRoute"},r.a.createElement(d,null),r.a.createElement(B,null),r.a.createElement(A,null),r.a.createElement(W,null))},z=function(){var e=Object(a.useContext)(i),t=Object(o.a)(e,2),n=(t[0],t[1]),l=Object(s.g)();return n({}),localStorage.removeItem("user"),l.push("/"),r.a.createElement("div",null)},K=function(e){var t=Object(s.h)().id,n=Object(a.useContext)(i),l=Object(o.a)(n,1)[0],c=Object(s.g)(),u={method:v.POST,headers:{}},m=x("/article/".concat(t),null,u),p=Object(o.a)(m,1)[0],E=R("/article/".concat(t),{token:l.token,method:v.PUT,defaultState:p,onSuccessCallback:function(){c.push("/my-stories")}}),b=E.handleSubmit,f=E.handleChange,h=E.errorMessage;return 0!==Object.keys(l).length&&(u.headers["x-access-token"]=l.token),r.a.createElement("div",{className:"form-container"},r.a.createElement(d,null),r.a.createElement("form",{onSubmit:b},""!==h&&r.a.createElement("p",{className:"error"},h),r.a.createElement("input",{className:"form-element",type:"text",name:"title",placeholder:"Title",onChange:f,autoFocus:!0,defaultValue:p&&p.title||"",minLength:8,maxLength:28}),r.a.createElement("textarea",{className:"form-element",name:"body",placeholder:"Write about your story",onChange:f,defaultValue:p&&p.body||"",minLength:8,maxLength:2e4}),r.a.createElement("input",{className:"btn",type:"submit",value:"Submit"})),r.a.createElement(W,null))};function Q(e){var t=e.Component,n=e.user,a=Object(c.a)(e,["Component","user"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))}n(35);l.render(a.createElement((function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),l=n[0],c=n[1];return r.a.createElement(i.Provider,{value:[l,c]},e.children)}),null,a.createElement((function(){var e=Object(a.useContext)(i),t=Object(o.a)(e,2),n=t[0],l=t[1],c=localStorage.getItem("user");return c&&0===Object.keys(n).length&&l(JSON.parse(c)),r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(s.d,null,r.a.createElement(Q,{path:"/logout",user:0!==Object.keys(n).length||null!=localStorage.getItem("user"),Component:z}),r.a.createElement(Q,{path:"/article/:id/update",Component:K,user:n}),r.a.createElement(Q,{path:"/my-stories",user:n,Component:$}),r.a.createElement(Q,{path:"/create-article",user:n,Component:Y}),r.a.createElement(s.b,{path:"/about"},r.a.createElement("h3",null,"about")),r.a.createElement(s.b,{path:"/register"},r.a.createElement(_,null)),r.a.createElement(s.b,{path:"/login"},r.a.createElement(H,null)),r.a.createElement(s.b,{path:"/article/:id"},r.a.createElement(q,null)),r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(V,null)))))}),null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.b6cca891.chunk.js.map